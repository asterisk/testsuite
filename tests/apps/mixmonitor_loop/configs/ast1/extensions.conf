[default]
exten => s,1,Answer()
	same => n,Set(i=0)
	same => n,While($[${INC(i)}<1100]) ; more than the default # of file descriptors per process
		same => n,MixMonitor(test.wav)
	same => n,EndWhile()
	same => n,While($[${INC(i)}<2200])
		same => n,MixMonitor(test2.wav,r(test2-rx.wav)t(test2-tx.wav))
	same => n,EndWhile()
	same => n,StopMixMonitor()
	same => n,MixMonitor(test3.wav)
	same => n,Wait(0.1)
	same => n,StopMixMonitor()
	same => n,ExecIf(${STAT(e,${AST_CONFIG(asterisk.conf,directories,astspooldir}/monitor/test3.wav)}?UserEvent(MixMonitorSuccess,Result: Pass):UserEvent(MixMonitorSuccess,Result: Fail))
	same => n,Hangup()

[nothing]
exten => 0,1,Answer()
	same => n,Wait(8)
	same => n,Hangup()
